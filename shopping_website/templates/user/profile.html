{% extends "base.html" %}

{% block title %}個人資料{% endblock %}

{% block content %}
<h2>個人資料</h2>
<p class="text-muted">
  這裡可以查看與更新目前登入帳號的基本資料(帳號與 Email)。之後若資料表加入姓名欄位，也可以在這裡一起編輯。
</p>

{% if error_message %}
  <div class="alert alert-error">
    {{ error_message }}
  </div>
{% endif %}

{% if success_message %}
  <div class="alert alert-success">
    {{ success_message }}
  </div>
{% endif %}

{% if profile %}
<form method="post">
  <label>
    帳號
    <input type="text" name="account" value="{{ profile['account'] }}" required>
  </label>

  <label>
    Email
    <input type="email" name="email" value="{{ profile['email'] or '' }}">
  </label>

  <label>
    角色（僅供顯示）
    <input type="text" value="{{ profile['role'] }}" disabled>
  </label>

  <label>
    工廠負責人金鑰（僅供顯示）
    <input type="text" value="{{ profile['registration_key'] or '' }}" disabled>
  </label>

  <div class="mt-2 text-right">
    <button type="submit">儲存變更</button>
  </div>
</form>
{% else %}
  <p class="text-muted">
    找不到目前使用者的資料，請重新登入後再試一次。
  </p>
{% endif %}
{% endblock %}

